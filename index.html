<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mi PlayList para mi Amada üíñ</title>

  <!-- ‚úÖ META para redes sociales -->
  <meta property="og:title" content="Mi PlayList para mi Amada üíñ" />
  <meta property="og:description" content="Una app musical rom√°ntica solo para ti." />
  <meta property="og:image" content="https://sersacertret.github.io/PlayList-MiAmada/iconos/preview.jpg" />
  <meta property="og:url" content="https://sersacertret.github.io/PlayList-MiAmada/" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="iconos/icon-192.png" type="image/png" />
  <style>
    .show {
      opacity: 1 !important;
      transform: translateY(0) !important;
    }

    .scroll-text {
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      width: 100%;
      box-sizing: border-box;
      animation: scroll-left 12s linear infinite;
      color: #d81b60;
      font-weight: bold;
      margin: 10px 0;
    }

    @keyframes scroll-left {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    .download-button, .install-button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      margin-top: 15px;
      font-size: 14px;
      transition: transform 0.2s ease, background-color 0.3s ease;
    }

    .download-button:hover, .install-button:hover {
      transform: scale(1.05);
      background-color: #45a049;
    }

    .ios-message {
      margin-top: 10px;
      font-size: 14px;
      color: #555;
      background: #fff3cd;
      padding: 10px;
      border-radius: 10px;
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>üé∂ Mi PlayList para mi Amada üíñ</h1>
  </header>

  <main>
    <div class="player">
      <img src="iconos/icon-192.png" alt="Portada" class="cover" />
      <h2 id="now-playing" class="scroll-text">Reproduciendo: Canci√≥n 1 - Siempre T√∫</h2>

      <audio id="audio-player" controls>
        <source src="musica/cancion1.mp3" type="audio/mp3" />
        Tu navegador no soporta el reproductor de audio.
      </audio>

      <button id="download-btn" class="download-button">‚¨áÔ∏è Descargar canci√≥n actual</button>
      <button id="install-btn" class="install-button" style="display: none;">üì≤ Instalar esta app</button>
      <div id="ios-msg" class="ios-message">üì± En iPhone, toca <strong>el bot√≥n compartir</strong> (cuadro con flecha) y selecciona <strong>"Agregar a pantalla de inicio"</strong> para instalar la app.</div>

      <ul id="playlist">
        <li onclick="playSong('cancion1.mp3', 'Canci√≥n 1 - Siempre T√∫')">‚ñ∂Ô∏è Canci√≥n 1 - Siempre T√∫</li>
        <li onclick="playSong('cancion2.mp3', 'Canci√≥n 2 - Siempre Contigo')">‚ñ∂Ô∏è Canci√≥n 2 - Siempre Contigo</li>
      </ul>

      <div class="controls">
        <button onclick="prevSong()">‚èÆÔ∏è Anterior</button>
        <button onclick="nextSong()">‚è≠Ô∏è Siguiente</button>
      </div>
    </div>
  </main>

  <script>
    const tracks = [
      { title: "Canci√≥n 1 - Siempre T√∫", file: "cancion1.mp3" },
      { title: "Canci√≥n 2 - Siempre Contigo", file: "cancion2.mp3" }
    ];

    let currentTrack = 0;
    const player = document.getElementById('audio-player');
    const nowPlaying = document.getElementById('now-playing');

    function playSong(file, title) {
      player.src = 'musica/' + file;
      player.load();
      nowPlaying.textContent = 'Reproduciendo: ' + title;

      nowPlaying.classList.remove('show');
      void nowPlaying.offsetWidth;
      nowPlaying.classList.add('show');

      player.play();
    }

    function nextSong() {
      currentTrack = (currentTrack + 1) % tracks.length;
      playSong(tracks[currentTrack].file, tracks[currentTrack].title);
    }

    function prevSong() {
      currentTrack = (currentTrack - 1 + tracks.length) % tracks.length;
      playSong(tracks[currentTrack].file, tracks[currentTrack].title);
    }

    window.onload = () => {
      playSong(tracks[currentTrack].file, tracks[currentTrack].title);
      nowPlaying.classList.add('show');
    };

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('download-btn').addEventListener('click', () => {
        const current = tracks[currentTrack];
        const link = document.createElement('a');
        link.href = 'musica/' + current.file;
        link.download = current.file;
        link.click();
      });
    });

    document.addEventListener('click', function(e) {
      const particle = document.createElement('span');
      particle.textContent = '‚ú®';
      particle.style.position = 'absolute';
      particle.style.left = e.pageX + 'px';
      particle.style.top = e.pageY + 'px';
      particle.style.fontSize = '20px';
      particle.style.pointerEvents = 'none';
      particle.style.opacity = 1;
      particle.style.transition = 'all 0.8s ease-out';
      document.body.appendChild(particle);
      setTimeout(() => {
        particle.style.top = (e.pageY - 30) + 'px';
        particle.style.opacity = 0;
      }, 10);
      setTimeout(() => {
        particle.remove();
      }, 1000);
    });

    let deferredPrompt;
    const installBtn = document.getElementById('install-btn');
    const iosMsg = document.getElementById('ios-msg');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = 'inline-block';
    });

    installBtn.addEventListener('click', () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(() => {
          deferredPrompt = null;
          installBtn.style.display = 'none';
        });
      }
    });

    const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
    const isInStandaloneMode = ('standalone' in window.navigator) && window.navigator.standalone;

    if (isIOS && !isInStandaloneMode) {
      iosMsg.style.display = 'block';
    }
  </script>
</body>
</html>